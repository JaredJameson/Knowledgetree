# ============================================
# KnowledgeTree Production Environment Template
# ============================================
#
# INSTRUKCJA:
# 1. Skopiuj ten plik jako .env.production
# 2. Uzupełnij wszystkie wartości oznaczone jako REQUIRED
# 3. Opcjonalnie dostosuj wartości OPTIONAL
# 4. NIE commituj pliku .env.production do repozytorium!
#
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string for production
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://knowledgetree_user:CHANGE_ME_STRONG_PASSWORD@db:5432/knowledgetree_prod

# ============================================
# SECURITY & AUTHENTICATION
# ============================================
# SECRET_KEY: REQUIRED - Generate with: openssl rand -hex 32
# Used for JWT token signing - MUST be kept secret!
SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_HEX_32

# JWT token expiration (minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# AI & LLM CONFIGURATION
# ============================================
# Anthropic API Key: REQUIRED for AI Insights and Chat
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-CHANGE_ME

# Anthropic model to use
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# OpenAI API Key: REQUIRED for embeddings and general AI tasks
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-CHANGE_ME

# OpenAI model for general tasks
OPENAI_MODEL=gpt-4o-mini

# ============================================
# EMBEDDING CONFIGURATION
# ============================================
# Local BGE-M3 model for embeddings (1024 dimensions)
EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DIMENSIONS=1024

# Use local embeddings (True) or OpenAI embeddings (False)
USE_LOCAL_EMBEDDINGS=true

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis connection for caching and Celery
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379/0

# Redis password - generate with: openssl rand -hex 16
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD

# ============================================
# WEB CRAWLING & SEARCH (OPTIONAL)
# ============================================
# Firecrawl API Key: OPTIONAL - For premium web crawling
# Get from: https://firecrawl.dev/
# Leave empty to use basic HTTP scraper
FIRECRAWL_API_KEY=

# Serper API Key: OPTIONAL - For Google search
# Get from: https://serper.dev/
# Leave empty to disable web search
SERPER_API_KEY=

# Google Custom Search Engine: OPTIONAL
# Get from: https://developers.google.com/custom-search
GOOGLE_CSE_API_KEY=
GOOGLE_CSE_ID=

# ============================================
# YOUTUBE TRANSCRIPTION (OPTIONAL)
# ============================================
# YouTube API Key: OPTIONAL - For video transcription
# Get from: https://console.cloud.google.com/
YOUTUBE_API_KEY=

# ============================================
# STRIPE PAYMENT PROCESSING (OPTIONAL)
# ============================================
# Stripe API Keys: OPTIONAL - For subscription payments
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable major features (true/false)
ENABLE_WEB_CRAWLING=true
ENABLE_AI_INSIGHTS=true
ENABLE_AGENTIC_WORKFLOWS=true

# ============================================
# CORS CONFIGURATION
# ============================================
# Frontend URL for CORS (production domain)
# Example: https://knowledgetree.example.com
FRONTEND_URL=https://knowledgetree.example.com

# Backend API URL (production domain)
# Example: https://api.knowledgetree.example.com
BACKEND_URL=https://api.knowledgetree.example.com

# ============================================
# APPLICATION SETTINGS
# ============================================
# Demo mode - disable in production
DEMO_MODE=false

# Environment
ENVIRONMENT=production

# Debug mode - MUST be false in production
DEBUG=false

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================
# EMAIL CONFIGURATION (OPTIONAL)
# ============================================
# SMTP settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@knowledgetree.example.com
SMTP_FROM_NAME=KnowledgeTree

# ============================================
# SSL/TLS CONFIGURATION
# ============================================
# Domain for Let's Encrypt SSL certificate
DOMAIN=knowledgetree.example.com
SSL_EMAIL=admin@knowledgetree.example.com

# ============================================
# BACKUP CONFIGURATION (OPTIONAL)
# ============================================
# S3-compatible backup storage
BACKUP_S3_BUCKET=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=
BACKUP_S3_ENDPOINT=

# Backup retention (days)
BACKUP_RETENTION_DAYS=30

# ============================================
# MONITORING & OBSERVABILITY (OPTIONAL)
# ============================================
# Sentry DSN for error tracking
SENTRY_DSN=

# Prometheus metrics endpoint
ENABLE_METRICS=true

# ============================================
# PERFORMANCE TUNING
# ============================================
# Database connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Celery workers
CELERY_WORKERS=4

# Gunicorn workers (backend)
GUNICORN_WORKERS=4
GUNICORN_THREADS=2

# ============================================
# RATE LIMITING
# ============================================
# API rate limits (requests per minute)
RATE_LIMIT_API=60
RATE_LIMIT_AUTH=10
RATE_LIMIT_UPLOAD=5

# ============================================
# FILE UPLOAD LIMITS
# ============================================
# Max file size in MB
MAX_UPLOAD_SIZE_MB=100

# Allowed file extensions
ALLOWED_EXTENSIONS=pdf,txt,md,doc,docx

# ============================================
# NOTES
# ============================================
#
# REQUIRED VALUES:
# - DATABASE_URL: PostgreSQL connection string
# - SECRET_KEY: JWT signing key (generate with openssl)
# - ANTHROPIC_API_KEY: For AI features
# - OPENAI_API_KEY: For embeddings and AI
# - REDIS_PASSWORD: Redis authentication
# - FRONTEND_URL: Production frontend domain
# - BACKEND_URL: Production API domain
# - DOMAIN: Main domain for SSL certificate
# - SSL_EMAIL: Email for Let's Encrypt notifications
#
# OPTIONAL VALUES:
# - FIRECRAWL_API_KEY: Premium web crawling
# - SERPER_API_KEY: Google search integration
# - STRIPE_API_KEY: Payment processing
# - YOUTUBE_API_KEY: Video transcription
# - SMTP_*: Email notifications
# - BACKUP_*: Automated backups
# - SENTRY_DSN: Error tracking
#
# SECURITY CHECKLIST:
# ✅ Generate strong SECRET_KEY with openssl rand -hex 32
# ✅ Use strong database password
# ✅ Use strong Redis password
# ✅ Set DEBUG=false in production
# ✅ Configure SSL/TLS certificates
# ✅ Enable rate limiting
# ✅ Set up automated backups
# ✅ Configure monitoring and alerts
# ✅ Review CORS settings
# ✅ Secure all API keys
#
# ============================================
